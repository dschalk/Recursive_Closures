var e=Object.defineProperty,__name=(t,a)=>e(t,"name",{value:a,configurable:!0});import"../chunks/DBavZ5B7.js";import"../chunks/DS0lvVqG.js";import{o as t}from"../chunks/D2RUnR1M.js";import{p as a,a as i,f as n,t as r,b as s,c as o,i as l,d as c,m as h,s as f,r as d,j as p}from"../chunks/Ces5mITZ.js";import{e as u,s as v}from"../chunks/BsAXyQwB.js";import{f as m,a as g}from"../chunks/BYRDEjCi.js";import{b}from"../chunks/CpuaUByv.js";import{i as y}from"../chunks/DRkZpfQY.js";var P=m('<h1>Traveling Salesman Problem</h1> <button>Generate Cities</button> <button>Solve TSP (Step-by-Step)</button> <button>Reset</button> <p> </p> <p> </p> <div style="display: flex; gap: 20px;"><div><h2>Before</h2> <canvas width="800" height="600"></canvas> <p> </p></div> <div><h2>After</h2> <canvas width="800" height="600"></canvas> <p> </p></div></div>',1);function _page(e,m){a(m,!1);var D=h({cities:[],bestPath:[],penultimatePath:[],beforeDistance:0,afterDistance:0,improved:!0,step:0,lastChange:{start:-1,end:-1}});const x=Symbol("dF3x");var k=__name((e=>{let t={...e};const a=__name((e=>e===x?t:(t=e(t),a)),"go");return a}),"M")({cities:[],bestPath:[],penultimatePath:[],beforeDistance:0,afterDistance:0,improved:!0,step:0,lastChange:{start:-1,end:-1}});let T=h(),S=h();const C=__name((()=>{const e=Array.from({length:50},(()=>({x:800*Math.random(),y:600*Math.random()}))),t=Array.from({length:e.length},((e,t)=>t)),a=pathDistance(t,e);k((i=>({cities:e,bestPath:t,penultimatePath:t,beforeDistance:a,afterDistance:a,improved:!0,step:0,lastChange:{start:-1,end:-1}}))),f(D,k(x)),drawBefore(c(D).penultimatePath,c(D).lastChange),drawAfter(c(D).cities,c(D).bestPath,c(D).lastChange)}),"generateCities"),w=__name((e=>{e((e=>{if(!e.improved)return e;const{bestPath:t,cities:a}=e,i=pathDistance(t,a);for(let n=1;n<t.length-1;n++)for(let r=n+1;r<t.length;r++){const s=[...t],o=s.slice(n,r+1).reverse();s.splice(n,o.length,...o);const l=pathDistance(s,a);if(l<i)return{...e,bestPath:s,penultimatePath:t,afterDistance:l,improved:!0,step:e.step+1,lastChange:{start:n,end:r}}}return{...e,improved:!1,lastChange:{start:-1,end:-1}}})),f(D,e(x)),console.log("Current state:",c(D)),drawBefore(c(D).penultimatePath,c(D).lastChange),drawAfter(c(D).cities,c(D).bestPath,c(D).lastChange)}),"solveTSP");function pathDistance(e,t){if(!e||!t||e.length<2||t.length<2)return 0;let a=0;try{for(let i=0;i<e.length-1;i++)a+=distance(t[e[i]],t[e[i+1]]);a+=distance(t[e[e.length-1]],t[e[0]])}catch(i){return console.error("Error calculating path distance:",i),0}return a}function distance(e,t){return Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)}function drawBefore(e,t){if(!p(T)||!c(D).cities)return;const a=p(T).getContext("2d");a.clearRect(0,0,p(T).width,p(T).height),a.fillStyle="blue",c(D).cities.forEach((e=>{a.beginPath(),a.arc(e.x,e.y,5,0,2*Math.PI),a.fill()})),a.strokeStyle="red",a.lineWidth=2,a.beginPath(),a.moveTo(c(D).cities[e[0]].x,c(D).cities[e[0]].y);for(let i=1;i<e.length;i++)a.lineTo(c(D).cities[e[i]].x,c(D).cities[e[i]].y);if(a.stroke(),t&&t.start>=0&&t.end>=0){const{start:i,end:n}=t;a.strokeStyle="#00FFFF",a.lineWidth=6,a.beginPath(),a.moveTo(c(D).cities[e[i]].x,c(D).cities[e[i]].y);for(let t=i+1;t<=n;t++)a.lineTo(c(D).cities[e[t]].x,c(D).cities[e[t]].y);a.stroke()}}function drawAfter(e,t,a){if(!p(S))return;const i=p(S).getContext("2d");if(i.clearRect(0,0,p(S).width,p(S).height),i.fillStyle="blue",e.forEach((e=>{i.beginPath(),i.arc(e.x,e.y,5,0,2*Math.PI),i.fill()})),i.strokeStyle="red",i.lineWidth=2,i.beginPath(),i.moveTo(e[t[0]].x,e[t[0]].y),t.forEach((t=>{i.lineTo(e[t].x,e[t].y)})),i.lineTo(e[t[0]].x,e[t[0]].y),i.stroke(),a&&a.start>=0&&a.end>=0){const{start:n,end:r}=a;i.strokeStyle="#00FFFF",i.lineWidth=6,i.beginPath(),i.moveTo(e[t[n]].x,e[t[n]].y);for(let a=n+1;a<=r;a++)i.lineTo(e[t[a]].x,e[t[a]].y);i.stroke(),i.strokeStyle="#FFD700",i.lineWidth=6,i.beginPath(),i.moveTo(e[t[n]].x,e[t[n]].y);for(let a=r;a>=n;a--)i.lineTo(e[t[a]].x,e[t[a]].y);i.stroke()}}__name(pathDistance,"pathDistance"),__name(distance,"distance"),__name(drawBefore,"drawBefore"),__name(drawAfter,"drawAfter"),t((()=>{console.log("Component mounted"),k((e=>({cities:[],bestPath:[],penultimatePath:[],beforeDistance:0,afterDistance:0,improved:!0,step:0}))),f(D,k(x)),console.log("Initial State:",c(D))})),y();var F=P(),j=i(n(F),2),A=i(j,2),B=i(A,2),M=i(B,2),W=o(M);d(M);var $=i(M,2),E=o($);d($);var I=i($,2),_=o(I),N=i(o(_),2);b(N,(e=>f(T,e)),(()=>p(T)));var R=i(N,2),q=o(R);d(R),d(_);var G=i(_,2),O=i(o(G),2);b(O,(e=>f(S,e)),(()=>p(S)));var z=i(O,2),H=o(z);d(z),d(G),d(I),r(((e,t,a)=>{var i;v(W,`Steps Taken: ${(null==(i=c(D))?void 0:i.step)??""}`),v(E,`Improvement: ${e??""}`),v(q,`Total Distance: ${t??""}`),v(H,`Total Distance: ${a??""}`)}),[()=>{var e,t;return(null==(e=c(D))?void 0:e.beforeDistance)&&(null==(t=c(D))?void 0:t.afterDistance)?`${((c(D).beforeDistance-c(D).afterDistance)/c(D).beforeDistance*100).toFixed(2)}%`:"N/A"},()=>{var e;return(null==(e=c(D))?void 0:e.beforeDistance)?c(D).beforeDistance.toFixed(2):"N/A"},()=>{var e;return(null==(e=c(D))?void 0:e.afterDistance)?c(D).afterDistance.toFixed(2):"N/A"}],l),u("click",j,(()=>{C()})),u("click",A,(()=>{var e;(null==(e=c(D))?void 0:e.improved)&&w(k)})),u("click",B,(()=>{C()})),g(e,F),s()}__name(_page,"_page");export{_page as component};
//# sourceMappingURL=10.DzgScDRh.js.map
