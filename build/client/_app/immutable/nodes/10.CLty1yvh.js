var e=Object.defineProperty,__name=(t,a)=>e(t,"name",{value:a,configurable:!0});import{f as t,a}from"../chunks/BmjuCZ8b.js";import"../chunks/BHrKQAH6.js";import{o as i}from"../chunks/7PjWF9o6.js";import{p as n,a as r,f as s,t as o,b as l,c,i as h,d as f,m as d,s as p,j as u,r as v}from"../chunks/WU3FHSPT.js";import{e as m,s as g}from"../chunks/DbLMf37s.js";import{b}from"../chunks/CcpoW8Rx.js";import{i as y}from"../chunks/gELEUX2p.js";var P=t('<h1>Traveling Salesman Problem</h1> <div style="display: flex; gap: 20px;"><div><h2>Before</h2> <canvas width="800" height="600"></canvas> <p> </p></div> <div><h2>After</h2> <canvas width="800" height="600"></canvas> <p> </p></div></div> <button>Generate Cities</button> <button>Solve TSP (Step-by-Step)</button> <button>Reset</button> <p> </p> <p> </p>',1);function _page(e,t){n(t,!1);var D=d({cities:[],bestPath:[],penultimatePath:[],beforeDistance:0,afterDistance:0,improved:!0,step:0,lastChange:{start:-1,end:-1}});const x=Symbol("dF3x");var k=__name((e=>{let t={...e};const a=__name((e=>e===x?t:(t=e(t),a)),"go");return a}),"M")({cities:[],bestPath:[],penultimatePath:[],beforeDistance:0,afterDistance:0,improved:!0,step:0,lastChange:{start:-1,end:-1}});let T=d(),S=d();const C=__name((()=>{const e=Array.from({length:50},(()=>({x:800*Math.random(),y:600*Math.random()}))),t=Array.from({length:e.length},((e,t)=>t)),a=pathDistance(t,e);k((i=>({cities:e,bestPath:t,penultimatePath:t,beforeDistance:a,afterDistance:a,improved:!0,step:0,lastChange:{start:-1,end:-1}}))),p(D,k(x)),drawBefore(f(D).penultimatePath,f(D).lastChange),drawAfter(f(D).cities,f(D).bestPath,f(D).lastChange)}),"generateCities"),w=__name((e=>{e((e=>{if(!e.improved)return e;const{bestPath:t,cities:a}=e,i=pathDistance(t,a);for(let n=1;n<t.length-1;n++)for(let r=n+1;r<t.length;r++){const s=[...t],o=s.slice(n,r+1).reverse();s.splice(n,o.length,...o);const l=pathDistance(s,a);if(l<i)return{...e,bestPath:s,penultimatePath:t,afterDistance:l,improved:!0,step:e.step+1,lastChange:{start:n,end:r}}}return{...e,improved:!1,lastChange:{start:-1,end:-1}}})),p(D,e(x)),console.log("Current state:",f(D)),drawBefore(f(D).penultimatePath,f(D).lastChange),drawAfter(f(D).cities,f(D).bestPath,f(D).lastChange)}),"solveTSP");function pathDistance(e,t){if(!e||!t||e.length<2||t.length<2)return 0;let a=0;try{for(let i=0;i<e.length-1;i++)a+=distance(t[e[i]],t[e[i+1]]);a+=distance(t[e[e.length-1]],t[e[0]])}catch(i){return console.error("Error calculating path distance:",i),0}return a}function distance(e,t){return Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)}function drawBefore(e,t){if(!u(T)||!f(D).cities)return;const a=u(T).getContext("2d");a.clearRect(0,0,u(T).width,u(T).height),a.fillStyle="blue",f(D).cities.forEach((e=>{a.beginPath(),a.arc(e.x,e.y,5,0,2*Math.PI),a.fill()})),a.strokeStyle="red",a.lineWidth=2,a.beginPath(),a.moveTo(f(D).cities[e[0]].x,f(D).cities[e[0]].y);for(let i=1;i<e.length;i++)a.lineTo(f(D).cities[e[i]].x,f(D).cities[e[i]].y);if(a.stroke(),t&&t.start>=0&&t.end>=0){const{start:i,end:n}=t;a.strokeStyle="#00FFFF",a.lineWidth=6,a.beginPath(),a.moveTo(f(D).cities[e[i]].x,f(D).cities[e[i]].y);for(let t=i+1;t<=n;t++)a.lineTo(f(D).cities[e[t]].x,f(D).cities[e[t]].y);a.stroke()}}function drawAfter(e,t,a){if(!u(S))return;const i=u(S).getContext("2d");if(i.clearRect(0,0,u(S).width,u(S).height),i.fillStyle="blue",e.forEach((e=>{i.beginPath(),i.arc(e.x,e.y,5,0,2*Math.PI),i.fill()})),i.strokeStyle="red",i.lineWidth=2,i.beginPath(),i.moveTo(e[t[0]].x,e[t[0]].y),t.forEach((t=>{i.lineTo(e[t].x,e[t].y)})),i.lineTo(e[t[0]].x,e[t[0]].y),i.stroke(),a&&a.start>=0&&a.end>=0){const{start:n,end:r}=a;i.strokeStyle="#00FFFF",i.lineWidth=6,i.beginPath(),i.moveTo(e[t[n]].x,e[t[n]].y);for(let a=n+1;a<=r;a++)i.lineTo(e[t[a]].x,e[t[a]].y);i.stroke(),i.strokeStyle="#FFD700",i.lineWidth=6,i.beginPath(),i.moveTo(e[t[n]].x,e[t[n]].y);for(let a=r;a>=n;a--)i.lineTo(e[t[a]].x,e[t[a]].y);i.stroke()}}__name(pathDistance,"pathDistance"),__name(distance,"distance"),__name(drawBefore,"drawBefore"),__name(drawAfter,"drawAfter"),i((()=>{console.log("Component mounted"),k((e=>({cities:[],bestPath:[],penultimatePath:[],beforeDistance:0,afterDistance:0,improved:!0,step:0}))),p(D,k(x)),console.log("Initial State:",f(D))})),y();var F=P(),A=r(s(F),2),j=c(A),B=r(c(j),2);b(B,(e=>p(T,e)),(()=>u(T)));var M=r(B,2),W=c(M);v(M),v(j);var $=r(j,2),E=r(c($),2);b(E,(e=>p(S,e)),(()=>u(S)));var I=r(E,2),_=c(I);v(I),v($),v(A);var N=r(A,2),R=r(N,2),q=r(R,2),G=r(q,2),O=c(G);v(G);var z=r(G,2),H=c(z);v(z),o(((e,t,a)=>{var i;g(W,`Total Distance: ${e??""}`),g(_,`Total Distance: ${t??""}`),g(O,`Steps Taken: ${(null==(i=f(D))?void 0:i.step)??""}`),g(H,`Improvement: ${a??""}`)}),[()=>{var e;return(null==(e=f(D))?void 0:e.beforeDistance)?f(D).beforeDistance.toFixed(2):"N/A"},()=>{var e;return(null==(e=f(D))?void 0:e.afterDistance)?f(D).afterDistance.toFixed(2):"N/A"},()=>{var e,t;return(null==(e=f(D))?void 0:e.beforeDistance)&&(null==(t=f(D))?void 0:t.afterDistance)?`${((f(D).beforeDistance-f(D).afterDistance)/f(D).beforeDistance*100).toFixed(2)}%`:"N/A"}],h),m("click",N,(()=>{C()})),m("click",R,(()=>{var e;(null==(e=f(D))?void 0:e.improved)&&w(k)})),m("click",q,(()=>{C()})),a(e,F),l()}__name(_page,"_page");export{_page as component};
//# sourceMappingURL=10.CLty1yvh.js.map
